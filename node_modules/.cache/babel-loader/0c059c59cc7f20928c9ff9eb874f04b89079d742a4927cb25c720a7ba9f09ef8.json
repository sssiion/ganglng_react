{"ast":null,"code":"import React, { useContext, useMemo, useImperativeHandle, useLayoutEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useMap } from '../hooks/useMap.js';\nimport { KakaoMapMarkerClustererContext } from './MarkerClusterer.js';\nimport { useKakaoMapsSetEffect } from '../hooks/useKakaoMapsSetEffect.js';\n\n/**\n * Map에 CustomOverlay를 올릴 때 사용하는 컴포넌트 입니다.\n * `onCreate` 이벤트 또는 `ref` 객체를 통해서 `CustomOverlay` 객체에 직접 접근 및 초기 설정 작업을 지정할 수 있습니다.\n */\nconst CustomOverlayMap = /*#__PURE__*/React.forwardRef(function CustomOverlayMap(_ref, ref) {\n  let {\n    position,\n    children,\n    clickable,\n    xAnchor,\n    yAnchor,\n    zIndex,\n    onCreate\n  } = _ref;\n  const markerCluster = useContext(KakaoMapMarkerClustererContext);\n  const map = useMap(`CustomOverlayMap`);\n  const overlayPosition = useMemo(() => {\n    return new kakao.maps.LatLng(position.lat, position.lng);\n  }, [position.lat, position.lng]);\n  const overlay = useMemo(() => {\n    const container = document.createElement(\"div\");\n    container.style.display = \"none\";\n    const KakaoCustomOverlay = new kakao.maps.CustomOverlay({\n      clickable: clickable,\n      xAnchor: xAnchor,\n      yAnchor: yAnchor,\n      zIndex: zIndex,\n      position: overlayPosition,\n      content: container\n    });\n    return KakaoCustomOverlay;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [clickable, xAnchor, yAnchor]);\n  const container = useMemo(() => overlay.getContent(), [overlay]);\n  useImperativeHandle(ref, () => overlay, [overlay]);\n  useLayoutEffect(() => {\n    if (!map) return;\n    if (markerCluster) {\n      markerCluster.addMarker(overlay, true);\n    } else {\n      overlay.setMap(map);\n    }\n    return () => {\n      if (markerCluster) {\n        markerCluster.removeMarker(overlay, true);\n      } else {\n        overlay.setMap(null);\n      }\n    };\n  }, [map, markerCluster, overlay]);\n  useLayoutEffect(() => {\n    if (onCreate) onCreate(overlay);\n  }, [overlay, onCreate]);\n  useKakaoMapsSetEffect(overlay, \"setPosition\", overlayPosition);\n  useKakaoMapsSetEffect(overlay, \"setZIndex\", zIndex);\n  return container.parentElement && /*#__PURE__*/ReactDOM.createPortal(children, container.parentElement);\n});\nexport { CustomOverlayMap };","map":{"version":3,"names":["React","useContext","useMemo","useImperativeHandle","useLayoutEffect","ReactDOM","useMap","KakaoMapMarkerClustererContext","useKakaoMapsSetEffect","CustomOverlayMap","forwardRef","_ref","ref","position","children","clickable","xAnchor","yAnchor","zIndex","onCreate","markerCluster","map","overlayPosition","kakao","maps","LatLng","lat","lng","overlay","container","document","createElement","style","display","KakaoCustomOverlay","CustomOverlay","content","getContent","addMarker","setMap","removeMarker","parentElement","createPortal"],"sources":["C:/Users/USER/my-app/node_modules/react-kakao-maps-sdk/esm/components/CustomOverlayMap.js"],"sourcesContent":["import React, { useContext, useMemo, useImperativeHandle, useLayoutEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useMap } from '../hooks/useMap.js';\nimport { KakaoMapMarkerClustererContext } from './MarkerClusterer.js';\nimport { useKakaoMapsSetEffect } from '../hooks/useKakaoMapsSetEffect.js';\n\n/**\n * Map에 CustomOverlay를 올릴 때 사용하는 컴포넌트 입니다.\n * `onCreate` 이벤트 또는 `ref` 객체를 통해서 `CustomOverlay` 객체에 직접 접근 및 초기 설정 작업을 지정할 수 있습니다.\n */\nconst CustomOverlayMap = /*#__PURE__*/React.forwardRef(function CustomOverlayMap(_ref, ref) {\n  let {\n    position,\n    children,\n    clickable,\n    xAnchor,\n    yAnchor,\n    zIndex,\n    onCreate\n  } = _ref;\n  const markerCluster = useContext(KakaoMapMarkerClustererContext);\n  const map = useMap(`CustomOverlayMap`);\n  const overlayPosition = useMemo(() => {\n    return new kakao.maps.LatLng(position.lat, position.lng);\n  }, [position.lat, position.lng]);\n  const overlay = useMemo(() => {\n    const container = document.createElement(\"div\");\n    container.style.display = \"none\";\n    const KakaoCustomOverlay = new kakao.maps.CustomOverlay({\n      clickable: clickable,\n      xAnchor: xAnchor,\n      yAnchor: yAnchor,\n      zIndex: zIndex,\n      position: overlayPosition,\n      content: container\n    });\n    return KakaoCustomOverlay;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [clickable, xAnchor, yAnchor]);\n  const container = useMemo(() => overlay.getContent(), [overlay]);\n  useImperativeHandle(ref, () => overlay, [overlay]);\n  useLayoutEffect(() => {\n    if (!map) return;\n    if (markerCluster) {\n      markerCluster.addMarker(overlay, true);\n    } else {\n      overlay.setMap(map);\n    }\n    return () => {\n      if (markerCluster) {\n        markerCluster.removeMarker(overlay, true);\n      } else {\n        overlay.setMap(null);\n      }\n    };\n  }, [map, markerCluster, overlay]);\n  useLayoutEffect(() => {\n    if (onCreate) onCreate(overlay);\n  }, [overlay, onCreate]);\n  useKakaoMapsSetEffect(overlay, \"setPosition\", overlayPosition);\n  useKakaoMapsSetEffect(overlay, \"setZIndex\", zIndex);\n  return container.parentElement && /*#__PURE__*/ReactDOM.createPortal(children, container.parentElement);\n});\n\nexport { CustomOverlayMap };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}